

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Step 2: Preparing the NAIF PDS4 Bundler Setup &mdash; NAIF PDS4 Bundler 1.0.0
 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Step 3: Running NAIF PDS4 Bundler" href="33_step_3_running_npb.html" />
    <link rel="prev" title="Step 1: Preparing Data" href="31_step_1_preparing_data.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> NAIF PDS4 Bundler
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="10_overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="20_spice_kernel_archive_description.html">SPICE Kernel Archive Description</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="30_spice_kernel_archive_preparation_guide.html">SPICE Kernel Archive Preparation Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="31_step_1_preparing_data.html">Step 1: Preparing Data</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Step 2: Preparing the NAIF PDS4 Bundler Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#workspace-setup">Workspace Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#working-directory">Working Directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#kernels-directory">Kernels Directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#orbnum-directory">ORBNUM Directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#staging-directory">Staging Directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bundle-directory">Bundle Directory</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#determination-of-the-archive-release-version">Determination of the Archive Release Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spice-kernel-descriptions-across-the-archive">SPICE Kernel descriptions across the archive</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spice-data-set-catalog-file">SPICE Data Set Catalog File</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-and-or-update-the-naif-pds4-bundler">Install and/or update the NAIF PDS4 Bundler</a></li>
<li class="toctree-l3"><a class="reference internal" href="#write-and-or-update-the-npb-configuration-file">Write and/or update the NPB Configuration File</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="33_step_3_running_npb.html">Step 3: Running NAIF PDS4 Bundler</a></li>
<li class="toctree-l2"><a class="reference internal" href="34_step_4_checking_the_result.html">Step 4: Checking the Result and Finishing Up</a></li>
<li class="toctree-l2"><a class="reference internal" href="35_step_5_packaging_to_naif.html">Step 5: Packaging and Delivering the Archive to the NAIF Node</a></li>
<li class="toctree-l2"><a class="reference internal" href="36_step_by_step_summary.html">Step-by-Step Summary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="40_naif_pds4_bundler_user_guide.html">NAIF PDS4 Bundler User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="50_api_docs.html">Modules, Classes, and Functions Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="60_annex_npb_for_pds3.html">Appendix: NPB for PDS3 Archives</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">NAIF PDS4 Bundler</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="30_spice_kernel_archive_preparation_guide.html">SPICE Kernel Archive Preparation Guide</a> &raquo;</li>
        
      <li>Step 2: Preparing the NAIF PDS4 Bundler Setup</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/32_step_2_npb_setup.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="step-2-preparing-the-naif-pds4-bundler-setup">
<h1>Step 2: Preparing the NAIF PDS4 Bundler Setup<a class="headerlink" href="#step-2-preparing-the-naif-pds4-bundler-setup" title="Permalink to this headline">¶</a></h1>
<p>After having gathered, prepared, and listed the kernels to archive the next
step is to get ready to run the NAIF PDS4 Bundler (NPB). You need to
take the following steps:</p>
<blockquote>
<div><ul class="simple">
<li><p>prepare your workspace</p></li>
<li><p>write and/or update the SPICEDS file</p></li>
<li><p>install/update NPB</p></li>
<li><p>write and/or update the NPB configuration file</p></li>
</ul>
</div></blockquote>
<section id="workspace-setup">
<h2>Workspace Setup<a class="headerlink" href="#workspace-setup" title="Permalink to this headline">¶</a></h2>
<p>NPB requires a directory layout but without a rigid or particular structure
since each directory is specified in the configuration file. Although
this is discussed later under the configuration file section, NPB needs to
know the directories where the input kernels are located (<strong>kernels</strong> directories),
the directory where the ORBNUM files are located (<strong>orbnum</strong> directory,
if applicable), the NPB run final destination (<strong>bundle</strong> directory), the NPB
run staging area (<strong>staging</strong> directory, where NPB will move the input files and
generate PDS artifacts), and the directory where NPB will write the archive
generation logs and by-products (<strong>working</strong> directory).</p>
<p>If you are providing your own templates to NPB then you will also need to
specify a directory for them (<strong>templates</strong> directory.)</p>
<section id="working-directory">
<h3>Working Directory<a class="headerlink" href="#working-directory" title="Permalink to this headline">¶</a></h3>
<p>NPB requires a directory to generate the execution by-products that include but
are not limited to (depending on the execution arguments): an execution log,
a  kernel list, diff report files, and the file list. These files are described
in detail in the section <a class="reference internal" href="43_using_npb.html#execution-by-products"><span class="std std-ref">Execution by-products</span></a>.</p>
<p>It is always a good idea to use the working directory as a
permanent directory to store the files used and generated for each archive
release: configuration file, validation report, release plan, etc. This allows
you to have a history of all the releases of an archive.</p>
</section>
<section id="kernels-directory">
<h3>Kernels Directory<a class="headerlink" href="#kernels-directory" title="Permalink to this headline">¶</a></h3>
<p>NPB needs to know where it will get the input kernels from. You can define as
many kernel directories as you want via configuration: NPB will search all of
them looking for the kernels specified in the <strong>release plan</strong>. As soon as it
finds one, it will short-circuit the search in the other directories for the
given kernel.</p>
<p>These directories must follow the usual SPICE kernel subdirectory structure based
on kernel type. The required subdirectories depend of the input kernel types.</p>
<p>The directory(ies) structure can be created ad-hoc for NPB or can already exist:
you might use your operational SPICE kernel operational directories.</p>
<p>If you call the directory <code class="docutils literal notranslate"><span class="pre">kernels</span></code> and you are archiving the following
kernels:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nsy_sclkscet_00019</span><span class="o">.</span><span class="n">tsc</span>
<span class="n">insight_ida_enc_200829_201220_v1</span><span class="o">.</span><span class="n">bc</span>
<span class="n">insight_ida_pot_200829_201220_v1</span><span class="o">.</span><span class="n">bc</span>
</pre></div>
</div>
<p>your kernels directory structure should be, at least:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kernels</span><span class="o">/</span>
<span class="o">|--</span> <span class="n">ck</span>
<span class="o">+--</span> <span class="n">sclk</span>
</pre></div>
</div>
<p>Of course it could also be something like this:
<a class="reference external" href="https://naif.jpl.nasa.gov/pub/naif/INSIGHT/kernels/">https://naif.jpl.nasa.gov/pub/naif/INSIGHT/kernels/</a></p>
<p>Please note that if you chose to generate MKs automatically (as explained
in section <a class="reference internal" href="31_step_1_preparing_data.html#generating-mks-automatically"><span class="std std-ref">Generating MKs Automatically</span></a>),
you might not need to include a <code class="docutils literal notranslate"><span class="pre">mk</span></code> subdirectory in the kernels directory
structure.</p>
</section>
<section id="orbnum-directory">
<h3>ORBNUM Directory<a class="headerlink" href="#orbnum-directory" title="Permalink to this headline">¶</a></h3>
<p>ORBNUM files are not stored in the <strong>kernels</strong> directory, therefore
NPB requires you to specify where the ORBNUM files are located. For some
missions these files are under the <code class="docutils literal notranslate"><span class="pre">kernels/spk</span></code> directory, for others they
are under <code class="docutils literal notranslate"><span class="pre">misc/orbnum</span></code>, and for others they are generated for the occasion
and could be anywhere.</p>
</section>
<section id="staging-directory">
<h3>Staging Directory<a class="headerlink" href="#staging-directory" title="Permalink to this headline">¶</a></h3>
<p>The staging directory is used by NPB to copy the input files to, and to generate
the archive increment. This directory could be empty for every NPB run or could
contain the files of the previous increment.</p>
<p>NAIF recommends you clear this directory for every archive release.</p>
</section>
<section id="bundle-directory">
<h3>Bundle Directory<a class="headerlink" href="#bundle-directory" title="Permalink to this headline">¶</a></h3>
<p>The bundle directory points to the complete archive. This directory could be
the final, public destination of the archive or not (NAIF recommends
against it being the final destination). In any case this directory must contain
the complete archive.</p>
<p>NPB will copy the resulting files of the run (in the staging area) to this
bundle directory, unless indicated otherwise, as you will be able to learn in
<a class="reference internal" href="43_using_npb.html#optional-arguments-description"><span class="std std-ref">Optional Arguments Description</span></a>.</p>
</section>
</section>
<section id="determination-of-the-archive-release-version">
<h2>Determination of the Archive Release Version<a class="headerlink" href="#determination-of-the-archive-release-version" title="Permalink to this headline">¶</a></h2>
<p>NPB will determine the archive release version by accessing the existing bundle
label from the bundle directory. If no bundle is present NPB will default the
version to <code class="docutils literal notranslate"><span class="pre">01</span></code>.</p>
</section>
<section id="spice-kernel-descriptions-across-the-archive">
<h2>SPICE Kernel descriptions across the archive<a class="headerlink" href="#spice-kernel-descriptions-across-the-archive" title="Permalink to this headline">¶</a></h2>
<p>Spending the effort to prepare adequate descriptions of the data is
essential to guarantee that the data can be used correctly and efficiently
by future users. NAIF requires that SPICE archives provide kernel data
descriptions in the following three locations in the archive:</p>
<blockquote>
<div><ul class="simple">
<li><p>internal comments included in the kernels</p></li>
<li><p>SPICE Archive Description file (SPICEDS) provided in the document
collection of the archive</p></li>
<li><p>description tag of the SPICE Kernel and ORBNUM labels</p></li>
</ul>
</div></blockquote>
<p>Descriptions given in each of these locations have different purposes
and levels of detail. The <strong>comments</strong> in a particular file provide the
most detailed and comprehensive information about the file that they
document and are discussed in great detail in the section
<a class="reference internal" href="31_step_1_preparing_data.html#augmenting-files-with-comments"><span class="std std-ref">Augmenting Files with Comments</span></a>.
The <strong>SPICEDS</strong> file provides a high level overview of the archive,
covering briefly the types of information provided in, the source data of,
and the accuracy of each type of kernels included in the archive. It also
describes the naming scheme and usage priority of the collection of
files of a particular kernel type in the data subdirectory in which they
reside. The <strong>description tag</strong> in XML <em>labels</em> provide a brief description of
the kernel, including its coverage (if relevant), its data source and/or
original name, and their producer.</p>
<p>Descriptions that are expected to be included in the SPICEDS file and in
labels are described in greater detail in the next few sub-sections of this
document.</p>
</section>
<section id="spice-data-set-catalog-file">
<h2>SPICE Data Set Catalog File<a class="headerlink" href="#spice-data-set-catalog-file" title="Permalink to this headline">¶</a></h2>
<p>The SPICE Archive Description file (SPICEDS) provides a high level overview of
SPICE, Kernel types, and the archive; covering briefly the type of information
provided in, the source of, and the accuracy of each kind of kernel included in
the archive.</p>
<p>Preparing the SPICEDS file is very easily done by taking an existing
SPICEDS file from an existing archive and changing just a few words
in it (such as mission name and acronym, publication dates, etc). NPB provides
a set of SPICEDS examples that can be found on
<code class="docutils literal notranslate"><span class="pre">tests/naif_pds4_bundler/data/spiceds_&lt;sc&gt;.html</span></code> where <code class="docutils literal notranslate"><span class="pre">&lt;sc&gt;</span></code> is the mission
acronym.</p>
<p>When choosing a starting SPICEDS file make sure that you chose one
for a mission that is similar to the one you are generating the archive for.
For example, if you are generating the archive for a lander mission, you can
start with <code class="docutils literal notranslate"><span class="pre">tests/naif_pds4_bundler/data/spiceds_insight.html</span></code>, whereas if
you need to include ORBNUM files, it might be interesting to take a look at
<code class="docutils literal notranslate"><span class="pre">tests/naif_pds4_bundler/data/spiceds_maven.html</span></code>. Look at
<code class="docutils literal notranslate"><span class="pre">tests/naif_pds4_bundler/data/spiceds_orex.html</span></code> for an archive that includes
DSK files, and <code class="docutils literal notranslate"><span class="pre">tests/naif_pds4_bundler/data/spiceds_m2020.html</span></code> for a rover
mission.</p>
<p>The SPICEDS should contain a number of sections, many of which remain unchanged
from archive to archive. Below is a description of each of these sections with
recommendations on how to adapt them to your archive:</p>
<blockquote>
<div><ul>
<li><p><strong>Introduction</strong> will require an update on the mission name, and if
the mission has multiple observers you might also want to include them.</p></li>
<li><p><strong>Table of Contents</strong> might be updated depending if you are including
kernel types that are not present in your starting SPICEDS and
adding or removing the “Orbit Number Files” sub-section.</p></li>
<li><p><strong>Overview</strong> provides a high-level description of the archive and a
paragraph that gives its approximate time coverage. The coverage is usually
determined by the launch date and a pointer to the kernel that sets
the end time of the of the archive. The determination of the archive
coverage is discussed in section <a class="reference internal" href="22_pds4_spice_archive.html#product-coverage-assignment-rules"><span class="std std-ref">Product Coverage Assignment Rules</span></a>.</p></li>
<li><p><strong>Errata</strong> contains an enumerated list of errata items. These items are
generally related either to incompatibilities or issues with the PDS4
standard or to missing and/or incomplete data or liens. There are two items
that are likely to be present starting with the first release of the archive.</p>
<p>The following errata item must be present:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">This</span> <span class="n">document</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">simple</span> <span class="n">HTML</span> <span class="n">document</span><span class="o">.</span> <span class="n">Providing</span> <span class="n">documents</span> <span class="ow">in</span> <span class="n">a</span>
<span class="n">simple</span> <span class="n">mark</span><span class="o">-</span><span class="n">up</span> <span class="nb">format</span> <span class="n">was</span> <span class="n">allowed</span> <span class="n">by</span> <span class="n">earlier</span> <span class="n">versions</span> <span class="n">of</span> <span class="n">the</span> <span class="n">PDS4</span>
<span class="n">Standards</span> <span class="n">but</span> <span class="n">became</span> <span class="n">prohibited</span> <span class="ow">in</span> <span class="n">later</span> <span class="n">versions</span> <span class="n">starting</span> <span class="n">summer</span>
<span class="mf">2015.</span> <span class="n">Since</span> <span class="n">the</span> <span class="n">document</span> <span class="n">was</span> <span class="n">compliant</span> <span class="n">at</span> <span class="n">the</span> <span class="n">time</span> <span class="n">when</span> <span class="n">its</span> <span class="n">first</span>
<span class="n">version</span> <span class="n">was</span> <span class="n">released</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="k">continue</span> <span class="n">to</span> <span class="n">exist</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">archive</span>
<span class="k">as</span> <span class="n">an</span> <span class="n">HTML</span> <span class="n">document</span><span class="o">.</span>
</pre></div>
</div>
<p>If you are using a PDS Information Model (IM) older than version 1.14.0.0
(in fact NAIF recommends that you use IM version 1.5.0.0), then this item
must be present as well:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">The</span> <span class="n">XML</span> <span class="n">labels</span> <span class="n">of</span> <span class="n">the</span> <span class="n">ancillary</span> <span class="n">products</span> <span class="n">have</span> <span class="n">the</span> <span class="n">reference_type</span>
<span class="n">attribute</span> <span class="n">of</span> <span class="n">the</span> <span class="n">Internal_Reference</span> <span class="n">association</span> <span class="n">within</span> <span class="n">the</span>
<span class="n">Reference_List</span> <span class="k">class</span> <span class="nc">of</span> <span class="n">the</span> <span class="n">Context_Area</span> <span class="k">class</span> <span class="nc">pointing</span> <span class="n">to</span> <span class="n">the</span> <span class="n">latest</span>
<span class="n">archive</span> <span class="n">description</span> <span class="n">document</span> <span class="nb">set</span> <span class="n">to</span> <span class="s2">&quot;ancillary_to_data&quot;</span> <span class="n">which</span> <span class="ow">is</span> <span class="ow">not</span>
<span class="n">correct</span><span class="o">.</span> <span class="n">The</span> <span class="n">correct</span> <span class="n">value</span> <span class="s2">&quot;ancillary_to_document&quot;</span> <span class="n">could</span> <span class="ow">not</span> <span class="n">be</span> <span class="n">used</span>
<span class="ow">in</span> <span class="n">these</span> <span class="n">labels</span> <span class="n">because</span> <span class="n">it</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">available</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">PDS4</span> <span class="n">information</span>
<span class="n">model</span> <span class="p">(</span><span class="n">IM</span><span class="p">)</span> <span class="mf">1.5.0.0</span> <span class="n">used</span> <span class="n">by</span> <span class="n">this</span> <span class="n">archive</span><span class="o">.</span> <span class="n">This</span> <span class="n">value</span> <span class="n">was</span> <span class="n">added</span> <span class="n">to</span> <span class="n">IM</span>
<span class="n">only</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">version</span> <span class="mf">1.14.0.0</span><span class="o">.</span>
</pre></div>
</div>
</li>
<li><p><strong>Archive Contents</strong> provides a diagram with the archive organization.
You will need to update the mission acronym and add/remove the
relevant kernel(s) and/or orbnum files and directories. Make sure that
files and directory descriptions are properly aligned, since while
updating them they might become misaligned.</p></li>
<li><p><strong>Kernel Types</strong> provides a description of each kernel type. It needs
to be adapted to the types of kernels present in the archive.</p></li>
<li><p><strong>Archived Kernel Details</strong> provides brief general information about
kernels of that type and describes the naming scheme, the source, and
use priority for the collection of kernel files contained in each kernel
subdirectory. This section is the one requiring the most work and it needs
to be aligned with the descriptions that are discussed in
<a class="reference internal" href="42_npb_configuration_file.html#kernel-descriptions"><span class="std std-ref">Kernel Descriptions</span></a>. Each
kernel type has a common introductory paragraph but the rest of the items
are mission specific.</p></li>
<li><p><strong>Miscellaneous Files</strong>, similar to the previous section it provides
the information for checksum files and, if applicable, for ORBNUM files.
The checksum file subsection requires no updates whereas the ORBNUM
subsection, if present, needs to be adapted. More information on ORBNUM
files is provided in section <a class="reference internal" href="31_step_1_preparing_data.html#a-word-on-orbit-number-files"><span class="std std-ref">A Word on Orbit Number Files</span></a>.</p></li>
<li><p><strong>File Formats</strong> provides information on the text and binary files
format. Although this section is very similar from archive to archive it
requires adaptation depending on the kernel types and ORBNUM files present
in the archive, and most importantly on the IM used.</p>
<p>Archives that use a PDS IM older than 1.14.0.0 will use the following
text:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">All</span> <span class="n">text</span> <span class="n">documents</span><span class="p">,</span> <span class="n">checksum</span> <span class="n">files</span><span class="p">,</span> <span class="n">ORBNUM</span> <span class="n">files</span><span class="p">,</span> <span class="ow">and</span> <span class="n">other</span> <span class="n">meta</span>
<span class="n">information</span> <span class="n">files</span> <span class="n">such</span> <span class="k">as</span> <span class="n">descriptions</span><span class="p">,</span> <span class="n">detached</span> <span class="n">PDS4</span> <span class="n">labels</span><span class="p">,</span> <span class="ow">and</span>
<span class="n">inventory</span> <span class="n">tables</span><span class="p">,</span> <span class="n">are</span> <span class="n">stream</span> <span class="nb">format</span> <span class="n">files</span><span class="p">,</span> <span class="k">with</span> <span class="n">a</span> <span class="n">carriage</span> <span class="k">return</span>
<span class="p">(</span><span class="n">ASCII</span> <span class="mi">13</span><span class="p">)</span> <span class="ow">and</span> <span class="n">a</span> <span class="n">line</span> <span class="n">feed</span> <span class="n">character</span> <span class="p">(</span><span class="n">ASCII</span> <span class="mi">10</span><span class="p">)</span> <span class="n">at</span> <span class="n">the</span> <span class="n">end</span> <span class="n">of</span> <span class="n">the</span>
<span class="n">records</span><span class="o">.</span> <span class="n">This</span> <span class="n">allows</span> <span class="n">the</span> <span class="n">files</span> <span class="n">to</span> <span class="n">be</span> <span class="n">read</span> <span class="n">by</span> <span class="n">most</span> <span class="n">operating</span> <span class="n">systems</span><span class="o">.</span>

<span class="n">The</span> <span class="n">text</span> <span class="n">kernel</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">this</span> <span class="n">archive</span> <span class="o">--</span> <span class="n">LSKs</span><span class="p">,</span> <span class="n">PCKs</span><span class="p">,</span> <span class="n">SCLKs</span><span class="p">,</span> <span class="n">IKs</span><span class="p">,</span> <span class="n">FKs</span><span class="p">,</span>
<span class="ow">and</span> <span class="n">MKs</span> <span class="o">--</span> <span class="n">are</span> <span class="n">UNIX</span> <span class="n">text</span> <span class="n">files</span><span class="p">,</span> <span class="k">with</span> <span class="n">a</span> <span class="n">line</span> <span class="n">feed</span> <span class="n">character</span> <span class="p">(</span><span class="n">ASCII</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">at</span> <span class="n">the</span> <span class="n">end</span> <span class="n">of</span> <span class="n">each</span> <span class="n">line</span><span class="o">.</span> <span class="n">Binary</span> <span class="n">kernel</span> <span class="n">files</span> <span class="o">--</span> <span class="n">SPKs</span> <span class="ow">and</span> <span class="n">CKs</span> <span class="o">--</span> <span class="n">are</span>
<span class="n">IEEE</span> <span class="n">LSB</span> <span class="n">binary</span> <span class="n">files</span><span class="o">.</span> <span class="p">(</span><span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>Archives that use a PDS IM equal or newer than 1.14.0.0 might decide to use
a line feed character (ASCII 10) at the end of each record for checksum
and ORBNUM files. This is specified via configuration as described in
<a class="reference internal" href="42_npb_configuration_file.html#the-information-model"><span class="std std-ref">The Information Model</span></a>. If so the
text for this section should be something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">All</span> <span class="n">text</span> <span class="n">documents</span> <span class="ow">and</span> <span class="n">other</span> <span class="n">meta</span> <span class="n">information</span> <span class="n">files</span> <span class="n">such</span> <span class="k">as</span> <span class="n">descriptions</span><span class="p">,</span>
<span class="n">detached</span> <span class="n">PDS4</span> <span class="n">labels</span><span class="p">,</span> <span class="ow">and</span> <span class="n">inventory</span> <span class="n">tables</span><span class="p">,</span> <span class="n">are</span> <span class="n">stream</span> <span class="nb">format</span> <span class="n">files</span><span class="p">,</span> <span class="k">with</span>
<span class="n">a</span> <span class="n">carriage</span> <span class="k">return</span> <span class="p">(</span><span class="n">ASCII</span> <span class="mi">13</span><span class="p">)</span> <span class="ow">and</span> <span class="n">a</span> <span class="n">line</span> <span class="n">feed</span> <span class="n">character</span> <span class="p">(</span><span class="n">ASCII</span> <span class="mi">10</span><span class="p">)</span> <span class="n">at</span> <span class="n">the</span>
<span class="n">end</span> <span class="n">of</span> <span class="n">the</span> <span class="n">records</span><span class="o">.</span> <span class="n">This</span> <span class="n">allows</span> <span class="n">the</span> <span class="n">files</span> <span class="n">to</span> <span class="n">be</span> <span class="n">read</span> <span class="n">by</span> <span class="n">most</span> <span class="n">operating</span>
<span class="n">systems</span><span class="o">.</span>

<span class="n">The</span> <span class="n">text</span> <span class="n">kernel</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">this</span> <span class="n">archive</span> <span class="o">--</span> <span class="n">LSKs</span><span class="p">,</span> <span class="n">PCKs</span><span class="p">,</span> <span class="n">SCLKs</span><span class="p">,</span> <span class="n">IKs</span><span class="p">,</span> <span class="n">FKs</span><span class="p">,</span>
<span class="ow">and</span> <span class="n">MKs</span> <span class="o">--</span><span class="p">,</span> <span class="n">the</span> <span class="n">ORBNUM</span> <span class="n">files</span><span class="p">,</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">checksum</span> <span class="n">files</span> <span class="n">are</span> <span class="n">UNIX</span> <span class="n">text</span> <span class="n">files</span><span class="p">,</span>
<span class="k">with</span> <span class="n">a</span> <span class="n">line</span> <span class="n">feed</span> <span class="n">character</span> <span class="p">(</span><span class="n">ASCII</span> <span class="mi">10</span><span class="p">)</span> <span class="n">at</span> <span class="n">the</span> <span class="n">end</span> <span class="n">of</span> <span class="n">each</span> <span class="n">line</span><span class="o">.</span> <span class="n">Binary</span>
<span class="n">kernel</span> <span class="n">files</span> <span class="o">--</span> <span class="n">SPKs</span> <span class="ow">and</span> <span class="n">CKs</span> <span class="o">--</span> <span class="n">are</span> <span class="n">IEEE</span> <span class="n">LSB</span> <span class="n">binary</span> <span class="n">files</span><span class="o">.</span> <span class="p">(</span><span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>SPICE Software and Documentation</strong> provides a very brief description
of the SPICE Toolkit and provides links to different resources. This
section is archive agnostic</p></li>
<li><p><strong>Contact Information</strong> provides the full contact information of the
archiving authority of the organization responsible of the archive
generation.</p></li>
<li><p><strong>Cognizant Persons</strong> identifies the persons that have generated the
archive along with their affiliation. Note that these are not necessarily
the person(s) who generated the SPICE kernels.</p></li>
</ul>
</div></blockquote>
<p>A well written SPICEDS put together for the first release may not need to be
modified for future releases unless new kinds of kernels not reflected in it
get added to the archive, or the errata section items need to be added, updated
or removed.</p>
<p>NPB does a number of checks on the archive and its data but it does not do
any kind of check in the SPICEDS file. Because of this and given that so many
small changes need to be made by hand it is easy to overlook some corrections
that have to be done. Checking the files that have been updated after all
updates have been made is essential to catch that. The simplest ways to do such
checks is using <code class="docutils literal notranslate"><span class="pre">tkdiff</span></code> (or a similar difference visualization tool) to compare
the new version with the original version, and using <code class="docutils literal notranslate"><span class="pre">grep</span></code> to look for various
tokens that should and should not appear in the new description such as new and
old mission acronyms, new and old kernels, and so on.</p>
<p>Finally, we recommend lines in a SPICEDS document be no longer than 78
characters with the only exception for lines containing HTML references that
can extend beyond the 78 character limit.</p>
</section>
<section id="install-and-or-update-the-naif-pds4-bundler">
<h2>Install and/or update the NAIF PDS4 Bundler<a class="headerlink" href="#install-and-or-update-the-naif-pds4-bundler" title="Permalink to this headline">¶</a></h2>
<p>Once the kernels are ready, the kernel list is ready, the meta-kernels have been
identified or have been written, the workspace is in place, and the SPICEDS file
has been generated or updated, it is time for the NAIF PDS4 Bundler (NPB) to
come into play.</p>
<p>The first thing you need to do is to install and/or update NPB. To do so
please follow the instructions provided in
<a class="reference internal" href="41_npb_installation.html#npb-installation"><span class="std std-ref">NPB Installation</span></a>. Once you are done, come back
here.</p>
<p>At this point you should be able to run the following command in a terminal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ naif-pds4-bundler --help
</pre></div>
</div>
<p>You should see a result similar to the following one:</p>
<span class="target" id="module-pds.naif_pds4_bundler.__main__"></span><p><strong>NAIF PDS4 Bundler Main Module</strong>.</p>
<p>usage: naif-pds4-bundler [-h] [-p PLAN] [-f FAUCET] [-l] [-s] [-v] [-d DIFF] [-c CLEAR] [-k KERLIST] CONFIG [CONFIG …]</p>
<p><strong>naif-pds4-bundler-0.13.1, NAIF PDS4 SPICE archive generation pipeline*</strong></p>
<p>naif-pds4-bundler is a command-line utility program that generates PDS4
bundles for SPICE kernel archives.</p>
<dl>
<dt>positional arguments:</dt><dd><p>CONFIG                XML Configuration file</p>
</dd>
<dt>optional arguments:</dt><dd><dl class="option-list">
<dt><kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></dt>
<dd><p>show this help message and exit</p>
</dd>
<dt><kbd><span class="option">-p <var>PLAN</var></span>, <span class="option">--plan <var>PLAN</var></span></kbd></dt>
<dd><p>Release plan file listing the kernels and/or ORBNUM
files to be archived. If this argument is not
provided, all the kernels found in the kernels
directory specified in the configuration file
in addition to new meta-kernels will be included
in the increment. If the <code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">--xml</span></code> argument
is used this argument can be the name of a
kernel or the path to a release plan file
(ORBNUM files will be ignored.)</p>
</dd>
<dt><kbd><span class="option">-f <var>FAUCET</var></span>, <span class="option">--faucet <var>FAUCET</var></span></kbd></dt>
<dd><p>Optional indication for end point of the pipeline.
Allowed values are: <code class="docutils literal notranslate"><span class="pre">clear</span></code>, <code class="docutils literal notranslate"><span class="pre">plan</span></code>, <code class="docutils literal notranslate"><span class="pre">list</span></code>,
<code class="docutils literal notranslate"><span class="pre">staging</span></code>, <code class="docutils literal notranslate"><span class="pre">bundle</span></code>, and <code class="docutils literal notranslate"><span class="pre">labels</span></code>.</p>
</dd>
<dt><kbd><span class="option">-l</span>, <span class="option">--log</span></kbd></dt>
<dd><p>Write log in file</p>
</dd>
<dt><kbd><span class="option">-s</span>, <span class="option">--silent</span></kbd></dt>
<dd><p>Log will not be prompted on the terminal during
execution.</p>
</dd>
<dt><kbd><span class="option">-v</span>, <span class="option">--verbose</span></kbd></dt>
<dd><p>Full log will be prompted on the terminal during
execution. If the argument is provided the
<code class="docutils literal notranslate"><span class="pre">-s,</span> <span class="pre">--silent</span></code> argument is omitted.</p>
</dd>
<dt><kbd><span class="option">-d <var>DIFF</var></span>, <span class="option">--diff <var>DIFF</var></span></kbd></dt>
<dd><p>Optional generation of diff reports for products.
Allowed values are: <code class="docutils literal notranslate"><span class="pre">files</span></code>, <code class="docutils literal notranslate"><span class="pre">log</span></code>, and <code class="docutils literal notranslate"><span class="pre">all</span></code>.</p>
</dd>
<dt><kbd><span class="option">-c <var>CLEAR</var></span>, <span class="option">--clear <var>CLEAR</var></span></kbd></dt>
<dd><p>Clears the files listed in the input file from the
staging and bundle directories and the kernel list
from the working directory. The input file should be
as generated by a prior execution with a <code class="docutils literal notranslate"><span class="pre">*.file_list</span></code>
extension. If this argument is provided it
overwrites the faucet argument to <code class="docutils literal notranslate"><span class="pre">clear</span></code> and
therefore the pipeline is not executed. If you
provide the adequate <code class="docutils literal notranslate"><span class="pre">-f,</span> <span class="pre">--faucet</span></code> argument, the
pipeline will be executed until indicated.</p>
</dd>
<dt><kbd><span class="option">-k <var>KERLIST</var></span>, <span class="option">--kerlist <var>KERLIST</var></span></kbd></dt>
<dd><p>Release plan file listing the kernels to be archived
along with some parameters required for the run.
If this argument is provided the release plan is
not generated.</p>
</dd>
</dl>
</dd>
</dl>
</section>
<section id="write-and-or-update-the-npb-configuration-file">
<h2>Write and/or update the NPB Configuration File<a class="headerlink" href="#write-and-or-update-the-npb-configuration-file" title="Permalink to this headline">¶</a></h2>
<p>Writing and/or updating the NPB Configuration File is the most important and
“challenging” step of the archive generation, second only to the collection and
preparation of the data. It requires a considerable effort, especially for the
first release.</p>
<p>Once you get to this point, if you get the configuration wrong
or the NPB run doesn’t go right, you will be able to get back to this “starting”
point with no effort.</p>
<p>Follow the instructions provided in
<a class="reference internal" href="42_npb_configuration_file.html#the-configuration-file"><span class="std std-ref">The Configuration File</span></a>
to write or update the Configuration File. This process might require a
<strong>considerable</strong> effort. Once you’ve got the configuration
file in place, we recommend you name it as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;sc&gt;_release_??.xml
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">&lt;sc&gt;</span></code> is the spacecraft acronym and <code class="docutils literal notranslate"><span class="pre">??</span></code> is the archive’s release
version. The MAVEN release 26 configuration file will be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">maven_release_26</span><span class="o">.</span><span class="n">xml</span>
</pre></div>
</div>
<p>We recommend that you move and keep this file in your <strong>working</strong> directory.</p>
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="33_step_3_running_npb.html" class="btn btn-neutral float-right" title="Step 3: Running NAIF PDS4 Bundler" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="31_step_1_preparing_data.html" class="btn btn-neutral float-left" title="Step 1: Preparing Data" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2021, Caltech/JPL/NASA

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>